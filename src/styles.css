@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Tokyo Night Light Theme */
    --background: 225 14% 86%;
    --foreground: 230 37% 27%;

    --card: 225 14% 91%;
    --card-foreground: 230 37% 27%;

    --popover: 225 14% 91%;
    --popover-foreground: 230 37% 27%;

    --primary: 218 67% 36%;
    --primary-foreground: 0 0% 100%;

    --secondary: 74 38% 28%;
    --secondary-foreground: 0 0% 100%;

    --muted: 225 14% 80%;
    --muted-foreground: 230 20% 50%;

    --accent: 225 14% 80%;
    --accent-foreground: 230 37% 27%;

    --destructive: 348 60% 41%;
    --destructive-foreground: 0 0% 100%;

    --success: 142 70% 45%;
    --success-foreground: 0 0% 100%;

    --warning: 36 75% 32%;
    --warning-foreground: 0 0% 100%;

    --danger: 348 60% 41%;
    --danger-foreground: 0 0% 100%;

    --border: 225 14% 75%;
    --input: 225 14% 70%;
    --ring: 218 67% 36%;

    --radius: 0.5rem;

    /* Sidebar (shadcn/ui) */
    --sidebar-background: 225 14% 88% / 0.95;
    --sidebar-foreground: var(--foreground);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--primary-foreground);
    --sidebar-accent: var(--accent);
    --sidebar-accent-foreground: var(--accent-foreground);
    --sidebar-border: var(--border);
    --sidebar-ring: var(--ring);

    /* Doppio Design Tokens - Tokyo Night Light Theme */
    --doppio-surface: 231 231 236;
    --doppio-surface-elevated: 236 236 241;
    --doppio-surface-muted: 213 214 219;

    --doppio-border: 180 185 200;
    --doppio-border-subtle: 200 205 220;

    --doppio-text-primary: 52 59 88;
    --doppio-text-secondary: 90 97 126;
    --doppio-text-muted: 150 151 163;

    /* Title bar */
    --doppio-titlebar-bg: 213 214 219 / 0.95;
    --doppio-titlebar-text: 52 59 88;
    --doppio-titlebar-tab-active: 236 236 241;
    --doppio-titlebar-tab-inactive: 213 214 219;
    --doppio-titlebar-tab-hover: 226 226 231;
    --doppio-titlebar-tab-border: 180 185 200;

    /* Sidebar */
    --doppio-sidebar-bg: 221 222 227 / 0.95;
    --doppio-sidebar-text: 52 59 88;
    --doppio-sidebar-item-active: 52 84 138 / 0.15;
    --doppio-sidebar-item-hover: 0 0 0 / 0.04;
    --doppio-sidebar-icon-active: 52 84 138;
    --doppio-sidebar-text-muted: 150 151 163;

    /* Accent colors - Tokyo Night */
    --doppio-accent-blue: 52 84 138;
    --doppio-accent-cyan: 15 75 110;
    --doppio-accent-green: 72 94 48;
    --doppio-accent-yellow: 143 94 21;
    --doppio-accent-red: 140 67 81;
    --doppio-accent-purple: 90 74 120;

    /* Terminal */
    --term-bg: 213 214 219;
    --term-fg: 52 59 88;
    --term-cursor: 52 59 88;
    --term-selection: 153 167 223 / 0.5;

    --term-card: rgba(231, 231, 236, 0.98);
    --term-card-muted: rgba(221, 222, 227, 0.95);
    --term-border: rgba(180, 185, 200, 0.8);
    --term-shadow-strong: 0 8px 32px rgba(0, 0, 0, 0.08);

    /* Shadows */
    --doppio-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05), 0 1px 3px 0 rgb(0 0 0 / 0.04);
    --doppio-shadow-md: 0 2px 4px 0 rgb(0 0 0 / 0.06), 0 4px 8px 0 rgb(0 0 0 / 0.05);
    --doppio-shadow-lg: 0 4px 8px 0 rgb(0 0 0 / 0.08), 0 8px 16px 0 rgb(0 0 0 / 0.06);
  }

  .dark {
    /* Tokyo Night Dark Theme (Storm variant) */
    --background: 230 19% 13%;
    --foreground: 229 29% 75%;

    --card: 230 19% 16%;
    --card-foreground: 229 29% 75%;

    --popover: 230 19% 16%;
    --popover-foreground: 229 29% 75%;

    --primary: 223 80% 72%;
    --primary-foreground: 230 19% 13%;

    --secondary: 74 64% 61%;
    --secondary-foreground: 230 19% 13%;

    --muted: 230 19% 22%;
    --muted-foreground: 229 20% 55%;

    --accent: 230 19% 22%;
    --accent-foreground: 229 29% 75%;

    --destructive: 352 72% 72%;
    --destructive-foreground: 230 19% 13%;

    --success: 74 64% 61%;
    --success-foreground: 230 19% 13%;

    --warning: 36 70% 64%;
    --warning-foreground: 230 19% 13%;

    --danger: 352 72% 72%;
    --danger-foreground: 230 19% 13%;

    --border: 230 19% 28%;
    --input: 230 19% 32%;
    --ring: 223 80% 72%;

    /* Sidebar (shadcn/ui) */
    --sidebar-background: 230 19% 13% / 0.96;
    --sidebar-foreground: var(--foreground);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--primary-foreground);
    --sidebar-accent: var(--accent);
    --sidebar-accent-foreground: var(--accent-foreground);
    --sidebar-border: var(--border);
    --sidebar-ring: var(--ring);

    /* Dark mode doppio tokens - Tokyo Night Dark */
    --doppio-surface: 26 27 38;
    --doppio-surface-elevated: 36 37 48;
    --doppio-surface-muted: 21 22 30;

    --doppio-border: 51 70 124;
    --doppio-border-subtle: 41 60 104;

    --doppio-text-primary: 192 202 245;
    --doppio-text-secondary: 169 177 214;
    --doppio-text-muted: 65 72 104;

    --doppio-titlebar-bg: 21 22 30 / 0.96;
    --doppio-titlebar-text: 192 202 245;
    --doppio-titlebar-tab-active: 51 70 124;
    --doppio-titlebar-tab-inactive: 26 27 38;
    --doppio-titlebar-tab-hover: 36 37 48;

    --doppio-sidebar-bg: 21 22 30 / 0.96;
    --doppio-sidebar-text: 192 202 245;
    --doppio-sidebar-item-active: 122 162 247 / 0.2;
    --doppio-sidebar-item-hover: 255 255 255 / 0.06;
    --doppio-sidebar-icon-active: 122 162 247;
    --doppio-sidebar-text-muted: 65 72 104;

    /* Accent colors - Tokyo Night Dark */
    --doppio-accent-blue: 122 162 247;
    --doppio-accent-cyan: 125 207 255;
    --doppio-accent-green: 158 206 106;
    --doppio-accent-yellow: 224 175 104;
    --doppio-accent-red: 247 118 142;
    --doppio-accent-purple: 187 154 247;

    --term-bg: 26 27 38;
    --term-fg: 169 177 214;
    --term-cursor: 192 202 245;
    --term-selection: 51 70 124 / 0.5;

    --term-card: rgba(36, 37, 48, 0.98);
    --term-card-muted: rgba(46, 47, 58, 0.95);
    --term-border: rgba(51, 70, 124, 0.8);
    --term-shadow-strong: 0 8px 32px rgba(0, 0, 0, 0.4);

    --doppio-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.2), 0 1px 3px 0 rgb(0 0 0 / 0.15);
    --doppio-shadow-md: 0 2px 4px 0 rgb(0 0 0 / 0.25), 0 4px 8px 0 rgb(0 0 0 / 0.2);
    --doppio-shadow-lg: 0 4px 8px 0 rgb(0 0 0 / 0.3), 0 8px 16px 0 rgb(0 0 0 / 0.25);
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* xterm.js overrides */
  .xterm .xterm-accessibility-tree {
    font-family: "JetBrains Mono", "Fira Code", "SF Mono", Menlo, Monaco, monospace;
  }

  .xterm-viewport {
    overflow-y: scroll !important;
    scrollbar-gutter: stable !important;
  }

  .xterm-viewport::-webkit-scrollbar {
    width: 0px;
    background: transparent;
  }

  /* Mouse mode support (tmux, vim, etc.) */
  .xterm.enable-mouse-events {
    /* When mouse events are enabled, use standard pointer cursor */
    cursor: default;
  }

  .xterm.enable-mouse-events .xterm-screen {
    cursor: default;
  }

  /* Link hover cursor */
  .xterm.xterm-cursor-pointer,
  .xterm.xterm-cursor-pointer .xterm-screen {
    cursor: pointer;
  }

  /* Column selection mode (alt buffer applications) */
  .xterm.column-select.focus,
  .xterm.column-select.focus .xterm-screen {
    cursor: crosshair;
  }
}

@layer components {
  /* Page layout utilities */
  .doppio-page {
    @apply h-full overflow-auto;
    background: rgb(var(--doppio-surface-muted));
  }

  .doppio-page-content {
    @apply w-full p-6;
  }

  .doppio-page-header {
    @apply flex items-center justify-between mb-6;
  }

  .doppio-page-title {
    @apply text-2xl font-bold text-foreground;
  }

  .doppio-page-subtitle {
    @apply text-sm text-muted-foreground;
  }

  /* Sidebar styles */
  .doppio-sidebar {
    @apply h-full flex flex-col transition-all duration-200;
    background: rgb(var(--doppio-sidebar-bg));
  }

  .doppio-sidebar-section-header {
    @apply text-[11px] font-medium uppercase tracking-wide;
    color: rgb(var(--doppio-sidebar-text-muted));
    letter-spacing: 0.02em;
  }

  .doppio-sidebar-item {
    @apply flex items-center gap-2.5 px-2.5 py-1.5 rounded-lg transition-all duration-150 text-[13px];
    @apply text-foreground/80 cursor-default;
  }

  .doppio-sidebar-item:hover {
    background: rgb(var(--doppio-sidebar-item-hover));
  }

  .doppio-sidebar-item-active {
    background: rgb(var(--doppio-sidebar-item-active));
    @apply text-foreground font-medium;
  }

  /* Card styles */
  .doppio-card {
    @apply bg-card border border-border rounded-xl;
    box-shadow: var(--doppio-shadow-md);
    transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
    transform: translateY(0);
  }

  .doppio-card:hover {
    box-shadow: var(--doppio-shadow-lg);
    transform: translateY(-2px);
  }

  .doppio-card-interactive {
    @apply doppio-card cursor-pointer;
  }

  .doppio-card-interactive:hover {
    @apply border-primary/40;
  }

  /* Stats grid */
  .doppio-stats-grid {
    @apply flex flex-wrap gap-4 mb-6;
  }

  .doppio-stats-grid > * {
    width: 180px;
    flex-shrink: 0;
  }

  .doppio-stat-card {
    @apply doppio-card p-4;
  }

  .doppio-stat-label {
    @apply text-sm text-muted-foreground mb-1;
  }

  .doppio-stat-value {
    @apply text-2xl font-bold;
  }

  /* Card grid */
  .doppio-card-grid {
    @apply flex flex-wrap gap-4;
  }

  .doppio-card-grid > * {
    width: 300px;
    flex-shrink: 0;
  }

  /* Host row - Termius style */
  .termius-host-row {
    @apply flex items-center px-3 rounded-lg cursor-default;
    @apply bg-card border border-border;
    width: 300px;
    height: 56px;
    flex-shrink: 0;
    box-shadow: var(--doppio-shadow-sm);
    transition: box-shadow 0.15s cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  .termius-host-row:hover {
    box-shadow: var(--doppio-shadow-md);
  }

  .termius-host-row-selected {
    @apply bg-primary/10 ring-1 ring-primary/30 border-primary/30;
  }

  .termius-host-list {
    @apply flex flex-wrap gap-3;
  }

  /* Toolbar */
  .termius-toolbar {
    @apply flex flex-col gap-3 mb-4;
  }

  .termius-toolbar-row {
    @apply flex items-center gap-2;
  }

  .termius-search-bar {
    @apply flex-1 flex items-center gap-2;
  }

  .termius-quick-actions {
    @apply flex items-center gap-1;
  }

  /* Line clamp utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
