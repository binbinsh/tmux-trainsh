# ssh-test.recipe
# Test SSH connection to a remote host
# Usage: train run ssh-test --host server=your-server

var WORKDIR = /tmp/trainsh-test

host server = localhost

# Open tmux session
tmux.open @server as work

# Create test directory and file
@work > mkdir -p $WORKDIR
@work > cd $WORKDIR && echo "Test file created at $(date)" > test.txt
@work > cat $WORKDIR/test.txt

# Show system info
@work > uname -a
@work > df -h | head -5

# Cleanup
@work > rm -rf $WORKDIR
@work > echo "Test completed!"

notify "SSH test done!"
tmux.close @work
